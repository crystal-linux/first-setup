{
    "log_file": "/etc/vanilla/first-setup.log",
    "distro_name": "Vanilla OS",
    "distro_logo": "io.github.vanilla-os.FirstSetup", 
    "steps": {
        "welcome": {
            "template": "welcome"
        },
        "theme": {
            "template": "theme"
        },
        "packages": {
            "template": "preferences",
            "icon": "vanilla-package-symbolic",
            "title": "Package Manager",
            "description": "Choose one or more package managers to install",
            "preferences": [
                {
                    "id": "flathub",
                    "title": "Flathub",
                    "subtitle": "Will also install flatpak",
                    "default": true
                },
		{
		    "id": "flathub-beta",
		    "title": "Flathub Beta",
		    "subtitle": "Beta software not ready to be published on flathub",
		    "default": false
		},
                {
                    "id": "nix",
                    "title": "nix",
                    "subtitle": "Enables the nix package manager on crystal",
		    "default": false
                }
            ],
            "final": [
                {
                    "if": "flathub",
                    "type": "command",
                    "commands": [
                        "echo 'fflathub enabled'"
                    ]
                },
		{
		    "if": "flathub-beta",
		    "type": "command",
		    "commands": [
		        "echo 'flathub beta enabled'"
		    ] 
		},
                {
                    "if": "nix",
                    "type": "command",
                    "commands": ["echo 'nix enabled'"]
                }
            ]
        },
        "immutability": {
            "template": "yes-no",
            "icon": "security-medium-symbolic",
            "title": "On-Demand Immutability",
            "description": "Choose whether to protect your system from deterioration by making it immutable.",
            "buttons": {
                "yes": "Enable",
                "no": "Skip",
                "info": {
                    "type": "text",
                    "title": "What is On-Demand Immutability?",
                    "text": "Immutability makes it impossible to modify system files, preventing them from being compromised.\n\nImmutable On-Demand mode is a file attribute-based system that lets you turn OS immutability on and off on the fly, without having to reboot. You can use the command line tool 'almost' to change its operation, check its status, change the default mode and much more.\n\nThis system does not require the use of special file systems and is entirely managed by the Almost tool, developed by the Vanilla OS Team."
                }
            },
            "final": [
                {
                    "if": "immutability",
                    "type": "command",
                    "commands": [
                        "echo 'almost enabled'"
                    ]
                }
            ]
        },
        "nvidia": {
            "template": "yes-no",
            "display-conditions": [
                "lspci | grep -i '.* vga .* nvidia .*'"
            ],
            "icon": "video-display-symbolic",
            "title": "NVIDIAÂ® Drivers",
            "description": "Choose whether to install proprietary NVIDIA drivers for better compatibility and performance.",
            "buttons": {
                "yes": "Yes, install",
                "no": "Skip"
            },
            "final": [
                {
                    "if": "nvidia",
                    "type": "command",
                    "commands": ["echo 'installing nvidia'"]
                }
            ]
        }
    }
}
